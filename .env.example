# ===================================
# 应用配置
# ===================================
NODE_ENV=production
PORT=3000
APP_PORT=3000
SESSION_SECRET=change-this-secret-key-in-production

# ===================================
# 数据库配置 (PostgreSQL)
# ===================================
# Docker 部署: 使用容器服务名 'postgres'
# 本地部署: 使用 'localhost' 或具体 IP
DB_HOST=postgres
DB_PORT=5432
DB_NAME=image_hosting
DB_USER=imghost
DB_PASSWORD=changeme123
DB_SSL=false

# ===================================
# 存储配置
# ===================================
# 存储类型: local 或 r2
STORAGE_TYPE=local

# ===================================
# Cloudflare R2 / S3 配置（仅当 STORAGE_TYPE=r2 时需要）
# ===================================
R2_ENABLED=false
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_ENDPOINT=
R2_BUCKET=
R2_REGION=auto
R2_CUSTOM_DOMAIN=

# ===================================
# 图片处理配置
# ===================================
# WebP 质量 (0-100)
IMAGE_QUALITY_WEBP=80
# AVIF 质量 (0-100)
IMAGE_QUALITY_AVIF=75
# PNG 优化
IMAGE_QUALITY_PNG_OPTIMIZE=false

# ===================================
# 备份配置
# ===================================
AUTO_BACKUP_ENABLED=true
AUTO_BACKUP_INTERVAL_HOURS=24
AUTO_BACKUP_KEEP_COUNT=7

# PostgreSQL 工具路径（Docker 环境自动设置，本地部署可能需要调整）
# PGDUMP_PATH=/usr/bin/pg_dump
# PSQL_PATH=/usr/bin/psql

# ===================================
# Docker 部署说明
# ===================================
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 修改敏感信息（密码、密钥等）
# 3. 使用 docker-compose 启动: docker-compose up -d
# 4. 查看日志: docker-compose logs -f app
# 5. 停止服务: docker-compose down
#
# 注意事项:
# - SESSION_SECRET 必须修改为随机字符串
# - DB_PASSWORD 请使用强密码
# - Docker 部署时 DB_HOST 使用容器服务名
# - 本地部署时 DB_HOST 使用 localhost
